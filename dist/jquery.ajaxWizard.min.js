!function(t){function e(e,n){this.element=e,this.settings=t.extend({},r,n),this._defaults=r,this._name=a,this.init()}var a="ajaxWizard",r={contentUrl:null,controlSelectors:{forward:".forward",backward:".backward"},beforeForward:function(){return!0},afterForward:function(){return!0},afterCachedForward:function(){return!0},beforeBackward:function(){return!0},afterBackward:function(){return!0}};t.extend(e.prototype,{init:function(){t(this.element).find("fieldset:first-child").addClass("current"),this.eventListeners()},currentStep:function(){return t(this.element).find("fieldset.current")},getContentUrl:function(){if(null===this.settings.contentUrl)throw new Error("contentUrl not defined");return this.settings.contentUrl},generateUniqueKey:function(){return(Math.random()*Math.random()).toString(16).substr(2,16)},whenCallingNextStep:function(e){t(e).data("ajax-wizard-key")&&t(e).data("ajax-wizard-hash")===this.currentStep().serialize()?(this.animate(this.currentStep(),t("."+t(e).data("ajax-wizard-key"))),this.afterCachedForwardCallback(this.element)):(t("."+t(e).data("ajax-wizard-key")).remove(),this.forward(e))},beforeForwardCallback:function(){return this.settings.beforeForward.call(this,this.element)},afterForwardCallback:function(){return this.settings.afterForward.call(this,this.element)},afterCachedForwardCallback:function(){return this.settings.afterCachedForward.call(this,this.element)},beforeBackwardCallback:function(){return this.settings.beforeBackward.call(this,this.element)},afterBackwardCallback:function(){return this.settings.afterBackward.call(this,this.element)},ajaxRequest:function(e){var a=this,r=this.currentStep().serialize();t.ajax({url:a.getContentUrl(),dataType:"html",method:"post",data:r,success:function(n){a.currentStep().after("<fieldset>"+n+"</fieldset>");var i=a.currentStep().next("fieldset");a.animate(a.currentStep(),i);var s=a.generateUniqueKey();t(e).data("ajax-wizard-key",s),t(e).data("ajax-wizard-hash",r),i.addClass(s),a.afterForwardCallback(this.element)}})},forward:function(t){this.beforeForwardCallback()===!0&&this.ajaxRequest(t)},backward:function(){this.beforeBackwardCallback()===!0&&(this.animate(this.currentStep(),this.currentStep().prev("fieldset")),this.afterBackwardCallback())},eventListeners:function(){var e=this;t(this.element).on("submit",function(t){t.preventDefault(),e.whenCallingNextStep(this)}),t(this.element).on("click",this.settings.controlSelectors.forward,function(){e.whenCallingNextStep(this)}),t(this.element).on("click",this.settings.controlSelectors.backward,function(){e.backward()})},animate:function(t,e){t.hide().removeClass("current"),e.fadeIn().addClass("current")}}),t.fn[a]=function(r){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new e(this,r))}),this}}(jQuery,window,document);